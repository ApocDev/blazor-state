trigger:
- master

pr: none

variables:
  Major: 1
  Minor: 0
  DotNetSdkVersion: 3.0.100

stages:
  - stage: Test
    jobs:
      - job:
        steps:
          - script: |
              echo TestStage
              echo $(Major)
              echo $(Minor)
              echo $(DotNetSdkVersion)

  - stage: Build
    variables:
      Patch: 0
      Build: $[counter(variables.Major, variables.Minor, variables.Patch, 0)]
      Version: '$(Major).$(Minor).$(Patch)-(Build)+$(DotNetSdkVersion)'
    jobs:
      - job:
        steps:
          - script: |
              echo Build
              echo $(Major)
              echo $(Minor)
              echo $(DotNetSdkVersion)
              echo $(Patch)
              echo $(Build)
              echo $(Version)

  - stage: Staging
    jobs:
      - job:
        steps:
          - script: echo Staging

  - stage: Production
    jobs:
      - job:
        steps:
          - script: echo Production