!function(e){var t={};function o(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(n,s,function(t){return e[t]}.bind(null,s));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=1)}([function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlazorStateName="BlazorState",t.DevToolsName="devTools",t.InitializeJavaScriptInteropName="InitializeJavaScriptInterop",t.JsonRequestHandlerMethodName="Handle",t.JsonRequestHandlerName="jsonRequestHandler",t.ReduxDevToolsFactoryName="ReduxDevToolsFactory",t.ReduxDevToolsName="reduxDevTools",t.ReduxExtentionName="__REDUX_DEVTOOLS_EXTENSION__"},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(2),s=o(3),a=o(0);function r(e){window[a.JsonRequestHandlerName]=e}function i(){const e=new s.ReduxDevTools;return window[a.ReduxDevToolsName]=e,e.IsEnabled}console.log("Initialize BlazorState"),"undefined"==typeof window||window[a.BlazorStateName]||(window[a.BlazorStateName]=new n.BlazorState,window[a.ReduxDevToolsFactoryName]=i,window[a.InitializeJavaScriptInteropName]=r)},function(e,t,o){"use strict";var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(s,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function i(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?s(e.value):new o(function(t){t(e.value)}).then(r,i)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=o(0);t.BlazorState=class{DispatchRequest(e,t){return n(this,void 0,void 0,function*(){const o=JSON.stringify(t);console.log(`Dispatching request of Type ${e}: ${o}`),yield window[s.JsonRequestHandlerName].invokeMethodAsync(s.JsonRequestHandlerMethodName,e,o)})}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0);t.ReduxDevTools=class{constructor(){this.MessageHandler=(e=>{console.log("ReduxDevTools.MessageHandler"),console.log(e);const t=this.MapRequestType(e);t?this.BlazorState.DispatchRequest(t,e):console.log("messages of this type are currently not supported")}),this.BlazorState=window[n.BlazorStateName],this.Config={name:"Blazor State",features:{pause:!1,lock:!1,persist:!1,export:!1,import:!1,jump:!0,skip:!1,reorder:!1,dispatch:!1,test:!1}},this.Extension=this.GetExtension(),this.DevTools=this.GetDevTools(),this.IsEnabled=!!this.DevTools,this.Init()}Init(){this.IsEnabled&&(this.DevTools.subscribe(this.MessageHandler),window[n.DevToolsName]=this.DevTools)}GetExtension(){const e=window[n.ReduxExtentionName];return e||console.log("Redux DevTools are not installed."),e}GetDevTools(){const e=this.Extension&&this.Extension.connect(this.Config);return e||console.log("Unable to connect to Redux DevTools."),e}MapRequestType(e){var t,o={COMMIT:void 0,IMPORT_STATE:void 0,JUMP_TO_ACTION:"BlazorState.Behaviors.ReduxDevTools.Features.JumpToState.JumpToStateRequest",JUMP_TO_STATE:"BlazorState.Behaviors.ReduxDevTools.Features.JumpToState.JumpToStateRequest",RESET:void 0,ROLLBACK:void 0,TOGGLE_ACTION:void 0};switch(e.type){case"START":t="BlazorState.Behaviors.ReduxDevTools.Features.Start.StartRequest";break;case"STOP":break;case"DISPATCH":t=o[e.payload.type]}return t&&console.log(`Redux Dev tools type: ${e.type} maps to ${t}`),t}ReduxDevToolsDispatch(e,t){return"init"===e?window[n.DevToolsName].init(t):window[n.DevToolsName].send(e,t)}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NvbnN0YW50cy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvSW5pdGlhbGl6ZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvQmxhem9yU3RhdGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1JlZHV4RGV2VG9vbHMudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJCbGF6b3JTdGF0ZU5hbWUiLCJEZXZUb29sc05hbWUiLCJJbml0aWFsaXplSmF2YVNjcmlwdEludGVyb3BOYW1lIiwiSnNvblJlcXVlc3RIYW5kbGVyTWV0aG9kTmFtZSIsIkpzb25SZXF1ZXN0SGFuZGxlck5hbWUiLCJSZWR1eERldlRvb2xzRmFjdG9yeU5hbWUiLCJSZWR1eERldlRvb2xzTmFtZSIsIlJlZHV4RXh0ZW50aW9uTmFtZSIsIkJsYXpvclN0YXRlXzEiLCJSZWR1eERldlRvb2xzXzEiLCJDb25zdGFudHNfMSIsIkluaXRpYWxpemVKYXZhU2NyaXB0SW50ZXJvcCIsIkpzb25SZXF1ZXN0SGFuZGxlciIsIndpbmRvdyIsIlJlZHV4RGV2VG9vbHNGYWN0b3J5IiwicmVkdXhEZXZUb29scyIsIlJlZHV4RGV2VG9vbHMiLCJJc0VuYWJsZWQiLCJjb25zb2xlIiwibG9nIiwiQmxhem9yU3RhdGUiLCJbb2JqZWN0IE9iamVjdF0iLCJyZXF1ZXN0VHlwZUZ1bGxOYW1lIiwicmVxdWVzdCIsInJlcXVlc3RBc0pzb24iLCJKU09OIiwic3RyaW5naWZ5IiwiaW52b2tlTWV0aG9kQXN5bmMiLCJ0aGlzIiwiTWVzc2FnZUhhbmRsZXIiLCJtZXNzYWdlIiwicmVxdWVzdFR5cGUiLCJNYXBSZXF1ZXN0VHlwZSIsIkRpc3BhdGNoUmVxdWVzdCIsIkNvbmZpZyIsImZlYXR1cmVzIiwicGF1c2UiLCJsb2NrIiwicGVyc2lzdCIsImV4cG9ydCIsImltcG9ydCIsImp1bXAiLCJza2lwIiwicmVvcmRlciIsImRpc3BhdGNoIiwidGVzdCIsIkV4dGVuc2lvbiIsIkdldEV4dGVuc2lvbiIsIkRldlRvb2xzIiwiR2V0RGV2VG9vbHMiLCJJbml0Iiwic3Vic2NyaWJlIiwiZXh0ZW5zaW9uIiwiZGV2VG9vbHMiLCJjb25uZWN0IiwiYmxhem9yUmVxdWVzdFR5cGUiLCJkaXNwYXRjaFJlcXVlc3RzIiwiQ09NTUlUIiwidW5kZWZpbmVkIiwiSU1QT1JUX1NUQVRFIiwiSlVNUF9UT19BQ1RJT04iLCJKVU1QX1RPX1NUQVRFIiwiUkVTRVQiLCJST0xMQkFDSyIsIlRPR0dMRV9BQ1RJT04iLCJ0eXBlIiwicGF5bG9hZCIsImFjdGlvbiIsInN0YXRlIiwiaW5pdCIsInNlbmQiXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEVBQUEsR0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxHQUFBLENBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsUUFBQSxJQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUFLQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUsRUFBQSxTQUFBUixFQUFBUyxF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c0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDEpO1xuIiwiZXhwb3J0IGNvbnN0IEJsYXpvclN0YXRlTmFtZTogc3RyaW5nID0gJ0JsYXpvclN0YXRlJztcclxuZXhwb3J0IGNvbnN0IERldlRvb2xzTmFtZTogc3RyaW5nID0gJ2RldlRvb2xzJztcclxuZXhwb3J0IGNvbnN0IEluaXRpYWxpemVKYXZhU2NyaXB0SW50ZXJvcE5hbWU6IHN0cmluZyA9ICdJbml0aWFsaXplSmF2YVNjcmlwdEludGVyb3AnO1xyXG5leHBvcnQgY29uc3QgSnNvblJlcXVlc3RIYW5kbGVyTWV0aG9kTmFtZTogc3RyaW5nID0gJ0hhbmRsZSc7XHJcbmV4cG9ydCBjb25zdCBKc29uUmVxdWVzdEhhbmRsZXJOYW1lOiBzdHJpbmcgPSAnanNvblJlcXVlc3RIYW5kbGVyJztcclxuZXhwb3J0IGNvbnN0IFJlZHV4RGV2VG9vbHNGYWN0b3J5TmFtZTogc3RyaW5nID0gJ1JlZHV4RGV2VG9vbHNGYWN0b3J5JztcclxuZXhwb3J0IGNvbnN0IFJlZHV4RGV2VG9vbHNOYW1lOiBzdHJpbmcgPSBcInJlZHV4RGV2VG9vbHNcIjtcclxuZXhwb3J0IGNvbnN0IFJlZHV4RXh0ZW50aW9uTmFtZTogc3RyaW5nID0gJ19fUkVEVVhfREVWVE9PTFNfRVhURU5TSU9OX18nO1xyXG4iLCJpbXBvcnQgeyBCbGF6b3JTdGF0ZSB9IGZyb20gJy4vQmxhem9yU3RhdGUnO1xyXG5pbXBvcnQgeyBSZWR1eERldlRvb2xzfSBmcm9tICcuL1JlZHV4RGV2VG9vbHMnO1xyXG5pbXBvcnQge1xyXG4gIEJsYXpvclN0YXRlTmFtZSxcclxuICBJbml0aWFsaXplSmF2YVNjcmlwdEludGVyb3BOYW1lLFxyXG4gIEpzb25SZXF1ZXN0SGFuZGxlck5hbWUsXHJcbiAgUmVkdXhEZXZUb29sc0ZhY3RvcnlOYW1lLFxyXG4gIFJlZHV4RGV2VG9vbHNOYW1lLFxyXG59IGZyb20gJy4vQ29uc3RhbnRzJztcclxuXHJcbmZ1bmN0aW9uIEluaXRpYWxpemUoKSB7XHJcbiAgY29uc29sZS5sb2coXCJJbml0aWFsaXplIEJsYXpvclN0YXRlXCIpO1xyXG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiAhd2luZG93W0JsYXpvclN0YXRlTmFtZV0pIHtcclxuICAgIHdpbmRvd1tCbGF6b3JTdGF0ZU5hbWVdID0gbmV3IEJsYXpvclN0YXRlKCk7XHJcbiAgICB3aW5kb3dbUmVkdXhEZXZUb29sc0ZhY3RvcnlOYW1lXSA9IFJlZHV4RGV2VG9vbHNGYWN0b3J5O1xyXG4gICAgd2luZG93W0luaXRpYWxpemVKYXZhU2NyaXB0SW50ZXJvcE5hbWVdID0gSW5pdGlhbGl6ZUphdmFTY3JpcHRJbnRlcm9wO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gSW5pdGlhbGl6ZUphdmFTY3JpcHRJbnRlcm9wKEpzb25SZXF1ZXN0SGFuZGxlcikge1xyXG4gIHdpbmRvd1tKc29uUmVxdWVzdEhhbmRsZXJOYW1lXSA9IEpzb25SZXF1ZXN0SGFuZGxlcjtcclxufTtcclxuXHJcbmZ1bmN0aW9uIFJlZHV4RGV2VG9vbHNGYWN0b3J5KCk6IGJvb2xlYW4ge1xyXG4gIGNvbnN0IHJlZHV4RGV2VG9vbHMgPSBuZXcgUmVkdXhEZXZUb29scygpO1xyXG4gIHdpbmRvd1tSZWR1eERldlRvb2xzTmFtZV0gPSByZWR1eERldlRvb2xzO1xyXG4gIHJldHVybiByZWR1eERldlRvb2xzLklzRW5hYmxlZDtcclxufVxyXG5cclxuSW5pdGlhbGl6ZSgpOyIsImltcG9ydCB7ICBKc29uUmVxdWVzdEhhbmRsZXJNZXRob2ROYW1lLCBKc29uUmVxdWVzdEhhbmRsZXJOYW1lIH0gZnJvbSAnLi9Db25zdGFudHMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIEJsYXpvclN0YXRlIHtcclxuICBhc3luYyBEaXNwYXRjaFJlcXVlc3QocmVxdWVzdFR5cGVGdWxsTmFtZTogc3RyaW5nLCByZXF1ZXN0OiBhbnkgKSB7XHJcbiAgICBjb25zdCByZXF1ZXN0QXNKc29uID0gSlNPTi5zdHJpbmdpZnkocmVxdWVzdCk7XHJcblxyXG4gICAgY29uc29sZS5sb2coYERpc3BhdGNoaW5nIHJlcXVlc3Qgb2YgVHlwZSAke3JlcXVlc3RUeXBlRnVsbE5hbWV9OiAke3JlcXVlc3RBc0pzb259YCk7XHJcbiAgICBhd2FpdCB3aW5kb3dbSnNvblJlcXVlc3RIYW5kbGVyTmFtZV0uaW52b2tlTWV0aG9kQXN5bmMoSnNvblJlcXVlc3RIYW5kbGVyTWV0aG9kTmFtZSwgcmVxdWVzdFR5cGVGdWxsTmFtZSwgcmVxdWVzdEFzSnNvbik7XHJcbiAgfVxyXG59IiwiaW1wb3J0IHsgQmxhem9yU3RhdGUsIH0gZnJvbSAnLi9CbGF6b3JTdGF0ZSc7XHJcbmltcG9ydCB7IEJsYXpvclN0YXRlTmFtZSwgUmVkdXhFeHRlbnRpb25OYW1lLCBEZXZUb29sc05hbWUsIFJlZHV4RGV2VG9vbHNOYW1lIH0gZnJvbSAnLi9Db25zdGFudHMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFJlZHV4RGV2VG9vbHMge1xyXG4gIElzRW5hYmxlZDogYm9vbGVhbjtcclxuICBEZXZUb29sczogYW55O1xyXG4gIEV4dGVuc2lvbjogYW55O1xyXG4gIENvbmZpZzogeyBuYW1lOiBzdHJpbmc7IGZlYXR1cmVzOiB7IHBhdXNlOiBib29sZWFuOyBsb2NrOiBib29sZWFuOyBwZXJzaXN0OiBib29sZWFuOyBleHBvcnQ6IGJvb2xlYW47IGltcG9ydDogYm9vbGVhbjsganVtcDogYm9vbGVhbjsgc2tpcDogYm9vbGVhbjsgcmVvcmRlcjogYm9vbGVhbjsgZGlzcGF0Y2g6IGJvb2xlYW47IHRlc3Q6IGJvb2xlYW47IH07IH07XHJcbiAgQmxhem9yU3RhdGU6IEJsYXpvclN0YXRlO1xyXG5cclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMuQmxhem9yU3RhdGUgPSB3aW5kb3dbQmxhem9yU3RhdGVOYW1lXTsgLy8gRGVwZW5kcyBvbiB0aGlzIGZ1bmN0aW9uYWxpdHlcclxuICAgIHRoaXMuQ29uZmlnID0ge1xyXG4gICAgICBuYW1lOiAnQmxhem9yIFN0YXRlJyxcclxuICAgICAgZmVhdHVyZXM6IHtcclxuICAgICAgICBwYXVzZTogZmFsc2UsIC8vIHN0YXJ0L3BhdXNlIHJlY29yZGluZyBvZiBkaXNwYXRjaGVkIGFjdGlvbnNcclxuICAgICAgICBsb2NrOiBmYWxzZSwgLy8gbG9jay91bmxvY2sgZGlzcGF0Y2hpbmcgYWN0aW9ucyBhbmQgc2lkZSBlZmZlY3RzXHJcbiAgICAgICAgcGVyc2lzdDogZmFsc2UsIC8vIHBlcnNpc3Qgc3RhdGVzIG9uIHBhZ2UgcmVsb2FkaW5nXHJcbiAgICAgICAgZXhwb3J0OiBmYWxzZSwgLy8gZXhwb3J0IGhpc3Rvcnkgb2YgYWN0aW9ucyBpbiBhIGZpbGVcclxuICAgICAgICBpbXBvcnQ6IGZhbHNlLCAvLyBpbXBvcnQgaGlzdG9yeSBvZiBhY3Rpb25zIGZyb20gYSBmaWxlXHJcbiAgICAgICAganVtcDogdHJ1ZSwgLy8ganVtcCBiYWNrIGFuZCBmb3J0aCAodGltZSB0cmF2ZWxpbmcpXHJcbiAgICAgICAgc2tpcDogZmFsc2UsIC8vIHNraXAgKGNhbmNlbCkgYWN0aW9uc1xyXG4gICAgICAgIHJlb3JkZXI6IGZhbHNlLCAvLyBkcmFnIGFuZCBkcm9wIGFjdGlvbnMgaW4gdGhlIGhpc3RvcnkgbGlzdFxyXG4gICAgICAgIGRpc3BhdGNoOiBmYWxzZSwgLy8gZGlzcGF0Y2ggY3VzdG9tIGFjdGlvbnMgb3IgYWN0aW9uIGNyZWF0b3JzXHJcbiAgICAgICAgdGVzdDogZmFsc2UgLy8gZ2VuZXJhdGUgdGVzdHMgZm9yIHRoZSBzZWxlY3RlZCBhY3Rpb25zXHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICB0aGlzLkV4dGVuc2lvbiA9IHRoaXMuR2V0RXh0ZW5zaW9uKCk7XHJcbiAgICB0aGlzLkRldlRvb2xzID0gdGhpcy5HZXREZXZUb29scygpO1xyXG4gICAgdGhpcy5Jc0VuYWJsZWQgPSB0aGlzLkRldlRvb2xzID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgdGhpcy5Jbml0KCk7XHJcbiAgfVxyXG5cclxuICBJbml0KCkge1xyXG4gICAgaWYgKHRoaXMuSXNFbmFibGVkKSB7XHJcbiAgICAgIHRoaXMuRGV2VG9vbHMuc3Vic2NyaWJlKHRoaXMuTWVzc2FnZUhhbmRsZXIpO1xyXG4gICAgICB3aW5kb3dbRGV2VG9vbHNOYW1lXSA9IHRoaXMuRGV2VG9vbHM7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBHZXRFeHRlbnNpb24oKSB7XHJcbiAgICBjb25zdCBleHRlbnNpb24gPSB3aW5kb3dbUmVkdXhFeHRlbnRpb25OYW1lXTtcclxuXHJcbiAgICBpZiAoIWV4dGVuc2lvbikge1xyXG4gICAgICBjb25zb2xlLmxvZygnUmVkdXggRGV2VG9vbHMgYXJlIG5vdCBpbnN0YWxsZWQuJyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZXh0ZW5zaW9uO1xyXG4gIH1cclxuXHJcbiAgR2V0RGV2VG9vbHMoKSB7XHJcbiAgICBjb25zdCBkZXZUb29scyA9IHRoaXMuRXh0ZW5zaW9uICYmIHRoaXMuRXh0ZW5zaW9uLmNvbm5lY3QodGhpcy5Db25maWcpO1xyXG4gICAgaWYgKCFkZXZUb29scykge1xyXG4gICAgICBjb25zb2xlLmxvZygnVW5hYmxlIHRvIGNvbm5lY3QgdG8gUmVkdXggRGV2VG9vbHMuJyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGV2VG9vbHM7XHJcbiAgfVxyXG5cclxuICBNYXBSZXF1ZXN0VHlwZShtZXNzYWdlKSB7XHJcbiAgICB2YXIgZGlzcGF0Y2hSZXF1ZXN0cyA9IHtcclxuICAgICAgJ0NPTU1JVCc6IHVuZGVmaW5lZCxcclxuICAgICAgJ0lNUE9SVF9TVEFURSc6IHVuZGVmaW5lZCxcclxuICAgICAgJ0pVTVBfVE9fQUNUSU9OJzogJ0JsYXpvclN0YXRlLkJlaGF2aW9ycy5SZWR1eERldlRvb2xzLkZlYXR1cmVzLkp1bXBUb1N0YXRlLkp1bXBUb1N0YXRlUmVxdWVzdCcsXHJcbiAgICAgICdKVU1QX1RPX1NUQVRFJzogJ0JsYXpvclN0YXRlLkJlaGF2aW9ycy5SZWR1eERldlRvb2xzLkZlYXR1cmVzLkp1bXBUb1N0YXRlLkp1bXBUb1N0YXRlUmVxdWVzdCcsXHJcbiAgICAgICdSRVNFVCc6IHVuZGVmaW5lZCxcclxuICAgICAgJ1JPTExCQUNLJzogdW5kZWZpbmVkLFxyXG4gICAgICAnVE9HR0xFX0FDVElPTic6IHVuZGVmaW5lZFxyXG4gICAgfTtcclxuICAgIHZhciBibGF6b3JSZXF1ZXN0VHlwZTtcclxuICAgIHN3aXRjaCAobWVzc2FnZS50eXBlKSB7XHJcbiAgICAgIGNhc2UgJ1NUQVJUJzpcclxuICAgICAgICBibGF6b3JSZXF1ZXN0VHlwZSA9ICdCbGF6b3JTdGF0ZS5CZWhhdmlvcnMuUmVkdXhEZXZUb29scy5GZWF0dXJlcy5TdGFydC5TdGFydFJlcXVlc3QnO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdTVE9QJzpcclxuICAgICAgICAvL2JsYXpvclJlcXVlc3RUeXBlID0gJ0JsYXpvclN0YXRlLkJlaGF2aW9ycy5SZWR1eERldlRvb2xzLkZlYXR1cmVzLlN0b3AuU3RvcFJlcXVlc3QnO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdESVNQQVRDSCc6XHJcbiAgICAgICAgYmxhem9yUmVxdWVzdFR5cGUgPSBkaXNwYXRjaFJlcXVlc3RzW21lc3NhZ2UucGF5bG9hZC50eXBlXTtcclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuICAgIGJsYXpvclJlcXVlc3RUeXBlICYmXHJcbiAgICAgIGNvbnNvbGUubG9nKGBSZWR1eCBEZXYgdG9vbHMgdHlwZTogJHttZXNzYWdlLnR5cGV9IG1hcHMgdG8gJHtibGF6b3JSZXF1ZXN0VHlwZX1gKTtcclxuXHJcbiAgICByZXR1cm4gYmxhem9yUmVxdWVzdFR5cGU7XHJcbiAgfVxyXG5cclxuICBNZXNzYWdlSGFuZGxlciA9IChtZXNzYWdlKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZygnUmVkdXhEZXZUb29scy5NZXNzYWdlSGFuZGxlcicpO1xyXG4gICAgY29uc29sZS5sb2cobWVzc2FnZSk7XHJcbiAgICB2YXIganNvblJlcXVlc3Q7XHJcbiAgICBjb25zdCByZXF1ZXN0VHlwZSA9IHRoaXMuTWFwUmVxdWVzdFR5cGUobWVzc2FnZSk7XHJcbiAgICBpZiAocmVxdWVzdFR5cGUpIHsgLy8gSWYgd2UgZG9uJ3QgbWFwIHRoaXMgdHlwZSB0aGVuIHRoZXJlIGlzIG5vdGhpbmcgdG8gZGlzcGF0Y2gganVzdCBpZ25vcmUuXHJcbiAgICAgIGpzb25SZXF1ZXN0ID0ge1xyXG4gICAgICAgIC8vIFRPRE86IG1ha2Ugc3VyZSBub24gUmVxdWVzdHMgZnJvbSBhc3NlbWJsaWVzIG90aGVyIHRoYW4gQmxhem9yU3RhdGUgYWxzbyB3b3JrLlxyXG4gICAgICAgIFJlcXVlc3RUeXBlOiByZXF1ZXN0VHlwZSxcclxuICAgICAgICBQYXlsb2FkOiBtZXNzYWdlXHJcbiAgICAgIH07XHJcblxyXG4gICAgICB0aGlzLkJsYXpvclN0YXRlLkRpc3BhdGNoUmVxdWVzdChyZXF1ZXN0VHlwZSwgbWVzc2FnZSk7XHJcbiAgICB9IGVsc2VcclxuICAgICAgY29uc29sZS5sb2coYG1lc3NhZ2VzIG9mIHRoaXMgdHlwZSBhcmUgY3VycmVudGx5IG5vdCBzdXBwb3J0ZWRgKTtcclxuICB9XHJcblxyXG4gIFJlZHV4RGV2VG9vbHNEaXNwYXRjaChhY3Rpb24sIHN0YXRlKSB7XHJcbiAgICBpZiAoYWN0aW9uID09PSAnaW5pdCcpIHtcclxuICAgICAgcmV0dXJuIHdpbmRvd1tEZXZUb29sc05hbWVdLmluaXQoc3RhdGUpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIHJldHVybiB3aW5kb3dbRGV2VG9vbHNOYW1lXS5zZW5kKGFjdGlvbiwgc3RhdGUpO1xyXG4gICAgfVxyXG4gIH1cclxufSJdLCJzb3VyY2VSb290IjoiIn0=